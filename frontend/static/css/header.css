@import url("./tokens/base.css");

/* Header */
#app-header {
  position: sticky;
  top: 0;
  z-index: 40;
  background: var(--color-bg-alt);
  padding: var(--spacing-sm) var(--spacing-xl);
  display: grid;
  grid-template-columns: auto minmax(0, 1fr);
  align-items: center;
  gap: var(--spacing-lg);

  #branding,
  .header-right {
    min-width: 0;
  }

  #branding {
    display: flex;
    align-items: center;
    min-width: 0;
    justify-self: start;
    grid-column: 1;
    grid-row: 1;
  }

  #branding .branding-link {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    text-decoration: none;
    flex: 0 0 auto;
  }

  .header-right {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--spacing-md);
    justify-self: stretch;
    width: 100%;
    min-width: 0;
    grid-column: 2;
    grid-row: 1;
  }

  .header-right > .search-wrap {
    position: relative;
    flex: 0 1 clamp(14rem, calc(8rem + 11vw), 18rem);
    max-width: clamp(16rem, calc(8rem + 16vw), 24rem);
  }

  .header-right > .user-actions {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-shrink: 0;
  }

  .search-toggle {
    display: none;
  }

  #calendar-control {
    grid-column: 1 / -1;
    grid-row: 1;
    justify-self: center;
    min-width: 0;
  }

  @media (max-width: 1080px) {
    gap: var(--spacing-md);
  }

  @media (max-width: 960px) {
    padding: var(--spacing-sm) var(--spacing-lg);
    grid-template-columns: auto minmax(0, 1fr) auto;
    grid-template-rows: auto auto;
    grid-template-areas:
      "brand calendar actions"
      "search search search";
    row-gap: var(--spacing-sm);

    #branding {
      grid-area: brand;
      justify-self: start;
    }

    #calendar-control {
      grid-area: calendar;
      justify-self: center;
    }

    .header-right {
      display: contents;
    }

    .header-right > .search-wrap {
      grid-area: search;
      width: 100%;
      max-width: none;
      margin: 0;
      display: none;
    }

    .header-right > .user-actions {
      grid-area: actions;
      justify-content: flex-end;
      gap: var(--spacing-xs);
    }

    .search-toggle {
      display: inline-flex;
    }
  }

  @media (max-width: 720px) {
    padding: var(--spacing-sm) var(--spacing-lg);

    #calendar-label {
      display: none;
    }
  }

  @media (max-width: 640px) {
    gap: var(--spacing-sm);

    .header-right {
      gap: var(--spacing-xs);
    }
  }

  @media (max-width: 520px) {
    padding: var(--spacing-xs) var(--spacing-md);
  }
}

@media (max-width: 960px) {
  body:not([data-search-compact="true"]) #app-header {
    row-gap: 0;
  }

  body[data-search-compact="true"] #app-header .header-right > .search-wrap {
    display: block;
  }

  #app-header .search-toggle {
    display: inline-flex;
  }
}
