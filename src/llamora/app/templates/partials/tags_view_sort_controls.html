{% set sort_kind = tags_sort_kind if tags_sort_kind is defined else (tags_view.sort_kind if tags_view is defined and tags_view else 'count') %}
{% set sort_dir = tags_sort_dir if tags_sort_dir is defined else (tags_view.sort_dir if tags_view is defined and tags_view else 'desc') %}
{% set entries_limit = entries_limit|default(12) %}
{% set base_day_url = url_for('days.day', date=day) %}
<div class="tags-view__sort" role="group" aria-label="Sort traces">
  {% set sort_params = 'view=tags&sort_kind=count&sort_dir=desc&entries_limit=' ~ entries_limit %}
  <button type="button"
          class="icon-btn tags-view__sort-btn{% if sort_kind == 'count' and sort_dir == 'desc' %} is-active{% endif %}"
          data-tags-sort-kind="count"
          data-tags-sort-dir="desc"
          data-tooltip-title="Most used first"
          hx-get="{{ base_day_url }}?{{ sort_params }}"
          hx-target="#tags-view-list"
          hx-swap="morph:outerHTML"
          hx-include="#tags-view-selected-tag"
          hx-push-url="true"
          hx-indicator="#tags-view-list-loading">
    <span class="icon-mask icon-arrow-down-1-0" aria-hidden="true"></span>
    <span class="visually-hidden">Sort by trace count descending</span>
  </button>
  {% set sort_params = 'view=tags&sort_kind=count&sort_dir=asc&entries_limit=' ~ entries_limit %}
  <button type="button"
          class="icon-btn tags-view__sort-btn{% if sort_kind == 'count' and sort_dir == 'asc' %} is-active{% endif %}"
          data-tags-sort-kind="count"
          data-tags-sort-dir="asc"
          data-tooltip-title="Least used first"
          hx-get="{{ base_day_url }}?{{ sort_params }}"
          hx-target="#tags-view-list"
          hx-swap="morph:outerHTML"
          hx-include="#tags-view-selected-tag"
          hx-push-url="true"
          hx-indicator="#tags-view-list-loading">
    <span class="icon-mask icon-arrow-up-1-0" aria-hidden="true"></span>
    <span class="visually-hidden">Sort by trace count ascending</span>
  </button>
  {% set sort_params = 'view=tags&sort_kind=alpha&sort_dir=asc&entries_limit=' ~ entries_limit %}
  <button type="button"
          class="icon-btn tags-view__sort-btn{% if sort_kind == 'alpha' and sort_dir == 'asc' %} is-active{% endif %}"
          data-tags-sort-kind="alpha"
          data-tags-sort-dir="asc"
          data-tooltip-title="A → Z"
          hx-get="{{ base_day_url }}?{{ sort_params }}"
          hx-target="#tags-view-list"
          hx-swap="morph:outerHTML"
          hx-include="#tags-view-selected-tag"
          hx-push-url="true"
          hx-indicator="#tags-view-list-loading">
    <span class="icon-mask icon-arrow-up-a-z" aria-hidden="true"></span>
    <span class="visually-hidden">Sort traces alphabetically ascending</span>
  </button>
  {% set sort_params = 'view=tags&sort_kind=alpha&sort_dir=desc&entries_limit=' ~ entries_limit %}
  <button type="button"
          class="icon-btn tags-view__sort-btn{% if sort_kind == 'alpha' and sort_dir == 'desc' %} is-active{% endif %}"
          data-tags-sort-kind="alpha"
          data-tags-sort-dir="desc"
          data-tooltip-title="Z → A"
          hx-get="{{ base_day_url }}?{{ sort_params }}"
          hx-target="#tags-view-list"
          hx-swap="morph:outerHTML"
          hx-include="#tags-view-selected-tag"
          hx-push-url="true"
          hx-indicator="#tags-view-list-loading">
    <span class="icon-mask icon-arrow-down-a-z" aria-hidden="true"></span>
    <span class="visually-hidden">Sort traces alphabetically descending</span>
  </button>
</div>
<span id="tags-view-list-loading"
      class="spinner tags-view__list-spinner"
      aria-hidden="true"></span>
