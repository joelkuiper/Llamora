<li class="{{ item.css_class }}" role="option" data-role="{{ item.role }}">
  <a href="{{ url_for('days.day', date=item.created_at[:10]) }}?target=msg-{{ item.id }}"
     hx-get="{{ url_for('chat.chat_htmx', date=item.created_at[:10]) }}?target=msg-{{ item.id }}"
     hx-target="#content-wrapper"
     hx-swap="outerHTML"
     data-date="{{ item.created_at[:10] }}"
     data-target="msg-{{ item.id }}"
     hx-trigger="click[!document.getElementById('chat') || document.getElementById('chat').dataset.date !== this.dataset.date]">
    <div class="search-result-time">
      {{ item.created_at|humanize }}
    </div>
    <div class="search-result-body">
      <div class="search-result-content">
        {%- if item.snippet.leading_ellipsis %}…{% endif -%}
        {%- for seg in item.snippet.segments -%}
          {%- if seg.hit -%}
            <mark>{{ seg.text }}</mark>
          {%- else -%}
            {{ seg.text }}
          {%- endif -%}
        {%- endfor -%}
        {%- if item.snippet.trailing_ellipsis %}…{% endif -%}
      </div>
      {% set visible_tags = item.visible_tags|default([]) %}
      {% if visible_tags %}
      <div class="search-result-tags">
        <div class="meta-chips meta-chips--static">
          {% for tag in visible_tags %}
          <span class="meta-chip keyword{% if tag.is_match %} is-highlighted{% endif %}">
            <span class="chip-label" title="{{ tag.name }}">{{ tag.name }}</span>
          </span>
          {% endfor %}
          {% if item.has_more_tags %}
          <span class="meta-chip keyword meta-chip--overflow" aria-hidden="true">
            <span class="chip-label">...</span>
          </span>
          {% endif %}
        </div>
      </div>
      {% endif %}
    </div>
  </a>
</li>
