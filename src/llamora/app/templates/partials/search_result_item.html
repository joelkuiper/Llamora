{% set item_date = item.created_date or item.created_at[:10] %}
<li class="{{ item.css_class }}" role="option" data-role="{{ item.role }}">
  <a href="{{ url_for('days.day', date=item_date) }}?view=diary&target=entry-{{ item.id }}"
     hx-get="{{ url_for('days.day', date=item_date) }}?view=diary&target=entry-{{ item.id }}"
     hx-target="#main-content"
     hx-swap="outerHTML"
     data-date="{{ item_date }}"
     data-target="entry-{{ item.id }}"
     hx-trigger="click[!document.getElementById('entries') || document.getElementById('entries').dataset.date !== this.dataset.date]">
    <div class="search-result-time">
      {{ item.created_at|humanize }}
    </div>
    <div class="search-result-body">
      <div class="search-result-content">
        {%- if item.snippet.leading_ellipsis %}…{% endif -%}
        {%- for seg in item.snippet.segments -%}
          {%- if seg.hit -%}
            <mark>{{ seg.text }}</mark>
          {%- else -%}
            {{ seg.text }}
          {%- endif -%}
        {%- endfor -%}
        {%- if item.snippet.trailing_ellipsis %}…{% endif -%}
      </div>
      {% set visible_tags = item.visible_tags|default([]) %}
      {% if visible_tags %}
      <div class="search-result-tags">
        <div class="entry-tags entry-tags--static">
          {% for tag in visible_tags %}
          <span class="entry-tag keyword{% if tag.is_match %} is-highlighted{% endif %}">
            <span class="tag-label" title="{{ tag.name }}">{{ tag.name }}</span>
          </span>
          {% endfor %}
          {% if item.has_more_tags %}
          <span class="entry-tag keyword entry-tag--overflow" aria-hidden="true">
            <span class="tag-label">...</span>
          </span>
          {% endif %}
        </div>
      </div>
      {% endif %}
    </div>
  </a>
</li>
