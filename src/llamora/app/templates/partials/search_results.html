{% from 'partials/overlay_close_button.html' import overlay_close_button %}
{% set items = results|default([]) %}
{% set query_present = has_query|default(false) %}
{% set total_known = total_known|default(true) %}
{% set showing_count = showing_count|default(items|length) %}
{% set truncation_notice = truncation_notice|default('') %}
<div class="search-results-status">
  {% if query_present %}
  <p class="visually-hidden" aria-live="polite" role="status" aria-atomic="true">
    {%- if items -%}
    Showing {{ showing_count }} search result{%- if showing_count != 1 %}s{% endif %}{% if not total_known %}+{% endif %}.
    {%- else -%}
    No matches found.
    {%- endif -%}
  </p>
  {% endif %}
  {% if truncation_notice %}
  <p class="search-results-notice" role="status" aria-live="polite">{{ truncation_notice }}</p>
  {% endif %}
  {% if items %}
  <div class="sr-panel glass-panel search-results-overlay">
    <ul class="search-results-list" role="listbox">
      {% include 'partials/search_results_stream_chunk.html' %}
    </ul>
    <div class="search-stream-loading" aria-hidden="true">
      <span class="search-load-indicator"></span>
    </div>
    {{ overlay_close_button() }}
  </div>
  {% elif query_present %}
  <div class="sr-panel glass-panel search-results-overlay is-empty">
    <div class="search-results-empty" role="group">
      <p class="search-results-empty-title">No matches found</p>
      <p class="search-results-empty-description">Try a different search or adjust your filters.</p>
    </div>
    {{ overlay_close_button() }}
  </div>
  {% endif %}
</div>
