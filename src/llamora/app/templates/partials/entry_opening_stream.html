{% set sse_url = url_for('entries.sse_opening', date=day) %}
{% set opening_cookie = 'opening_collapsed_' ~ day %}
{% set opening_collapsed = request.cookies.get(opening_cookie) == '1' %}
<response-stream id="opening-stream-{{ day }}"
                 class="entry assistant opening-stream entry--opening{% if opening_collapsed %} is-collapsed{% endif %}"
                 data-entry-id="opening-{{ day }}"
                 data-controller="off"
                 data-sse-url="{{ sse_url }}"
                 role="article"
                 aria-labelledby="opening-{{ day }}-speaker opening-{{ day }}-body">
  <span class="raw-response" hidden></span>
  <span class="visually-hidden" id="opening-{{ day }}-speaker">{{ config.APP_NAME }} opening</span>
  <div class="entry-main">
    <div class="entry-opening-header">
      <span class="entry-opening-title">day opening</span>
      <button type="button"
              class="opening-toggle"
              data-opening-toggle
              aria-expanded="{{ 'false' if opening_collapsed else 'true' }}"
              aria-label="{{ 'Expand day opening' if opening_collapsed else 'Collapse day opening' }}">
        <span class="icon-mask icon-chevron-up" aria-hidden="true" data-opening-icon-open></span>
        <span class="icon-mask icon-chevron-down" aria-hidden="true" data-opening-icon-closed></span>
      </button>
    </div>
    <div class="opening-content">
      <div class="markdown-body" id="opening-{{ day }}-body">
        <span id="typing-indicator-opening-{{ day }}"
              class="typing-indicator"
              data-typing-indicator
              data-entry-id="opening-{{ day }}">
          <span class="cursor">‚ùö</span>
        </span>
      </div>
    </div>
  </div>
</response-stream>
