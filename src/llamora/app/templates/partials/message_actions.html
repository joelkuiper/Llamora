{% macro message_actions(user_msg_id, day, reply_kinds=()) -%}
<message-actions class="message-actions" data-msg-id="{{ user_msg_id }}">
  <button class="message-action action-trigger"
          type="button"
          aria-label="Reply actions"
          data-tooltip-title="Reply actions">
    <img class="message-action__icon"
         src="{{ url_for('static', filename='icons/message-circle-more.svg') }}"
         alt=""
         aria-hidden="true">
  </button>
  <div class="tag-popover action-popover glass-panel" role="dialog" aria-modal="true" hidden>
    <div class="tp-content action-panel">
      <button type="button" class="overlay-close" aria-label="Close">Ã—</button>
      <div class="action-list" role="menu" aria-label="Reply actions">
        {% for kind in reply_kinds %}
        <button class="action-item"
                type="button"
                role="menuitem"
                hx-post="{{ url_for('chat.ask_llm', date=day, user_msg_id=user_msg_id) }}"
                hx-target="#msg-{{ user_msg_id }}"
                hx-swap="afterend"
                hx-include="#user-time"
                hx-vals='{"reply_kind":"{{ kind.id }}"}'
                data-action-kind="{{ kind.id }}"
                hx-on::config-request="const t=document.getElementById('user-time'); if(t){t.value=new Date().toISOString();}">
          {% if kind.id == "reply" %}
          <img class="action-item__icon" src="{{ url_for('static', filename='icons/corner-down-left.svg') }}" alt="" aria-hidden="true">
        {% elif kind.id == "acknowledge" %}
          <img class="action-item__icon" src="{{ url_for('static', filename='icons/heart.svg') }}" alt="" aria-hidden="true">
          {% elif kind.id == "notice" %}
          <img class="action-item__icon" src="{{ url_for('static', filename='icons/eye.svg') }}" alt="" aria-hidden="true">
          {% else %}
          <img class="action-item__icon" src="{{ url_for('static', filename='icons/reply.svg') }}" alt="" aria-hidden="true">
          {% endif %}
          <span class="action-item__label">{{ kind.label }}</span>
        </button>
        {% endfor %}
      </div>
    </div>
  </div>
</message-actions>
{%- endmacro %}
