{% set sort_kind = tags_sort_kind if tags_sort_kind is defined else (tags_view.sort_kind if tags_view is defined and tags_view else 'count') %}
{% set sort_dir = tags_sort_dir if tags_sort_dir is defined else (tags_view.sort_dir if tags_view is defined and tags_view else 'desc') %}
{% set selected_tag = tags_view.selected_tag if tags_view is defined and tags_view else (selected_tag|default('')) %}
<section id="tags-view" class="tags-view page-grid grid-12" data-day="{{ day }}">
  <aside class="tags-view__sidebar span-3">
    <div class="tags-view__sidebar-fixed">
      <div class="tags-view__list-head">
        <label class="tags-view__search search-input-wrap" for="tags-view-filter">
          <span class="icon-mask icon-search" aria-hidden="true"></span>
          <input id="tags-view-filter"
                 name="tags_view_filter"
                 type="search"
                 class="input tags-view__search-input"
                 placeholder="Find a trace"
                 autocomplete="off"
                 spellcheck="false"
                 data-tags-view-search>
          <button type="button"
                  class="tags-view__search-clear"
                  aria-label="Clear search"
                  data-tooltip-title="Clear search"
                  data-tags-view-search-clear
                  aria-hidden="true"
                  tabindex="-1">&times;</button>
        </label>
        <div class="tags-view__controls">
          <div id="tags-view-sort-controls">
            {% include 'components/tags/sort_controls.html' %}
          </div>
        </div>
      </div>
      <div class="tags-view__list-body">
        <div id="tags-view-list"
             class="tags-view__list"
             data-sort-kind="{{ sort_kind }}"
             data-sort-dir="{{ sort_dir }}">
          <nav class="tags-view__index" aria-label="Trace index" data-tags-view-index></nav>
          <p class="tags-view__search-empty" data-tags-view-empty hidden>No matching traces.</p>
        </div>
      </div>
    </div>
  </aside>
  <div class="tags-view__detail-area">
    {% include 'components/tags/detail.html' %}
    <div id="tags-view-detail-loading"
         class="entries-loading tags-view__loading tags-view__loading--anchored"
         hidden
         aria-hidden="true">
      <div class="entries-loading__backdrop" aria-hidden="true"></div>
      <div class="entries-loading__panel" role="status" aria-live="polite">
        <span class="entries-loading__spinner spinner" aria-hidden="true"></span>
        <span class="entries-loading__label">Retrievingâ€¦</span>
      </div>
    </div>
  </div>
</section>
<scroll-edge-button
  data-direction="up"
  data-edge-container="#main-content"
  data-edge-center=".tags-view__detail-inner"
  data-edge-avoid=".tags-view__detail-header"
  data-edge-offset="112"></scroll-edge-button>
{% include 'components/shared/shared_popovers.html' %}
