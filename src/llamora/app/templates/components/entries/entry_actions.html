{% macro entry_actions(entry_id, day, is_today=True, stop_url=None, response_active=False, oob=False) -%}
<entry-actions id="entry-actions-{{ entry_id }}"
                 class="entry-actions"
                 data-entry-id="{{ entry_id }}"
                 {% if stop_url %}data-stop-url="{{ stop_url }}"{% endif %}
                 {% if response_active %}data-response-active="true"{% endif %}
                 {% if oob %}hx-swap-oob="outerHTML"{% endif %}>
  <button class="entry-action action-trigger"
          type="button"
          {% if response_active %}
          aria-label="Stop response"
          data-tooltip-title="Stop response"
          {% if stop_url %}hx-post="{{ stop_url }}"{% endif %}
          {% if stop_url %}hx-swap="none"{% endif %}
          {% else %}
          aria-label="Respond"
          {% if is_today %}data-tooltip-title="Respond"{% endif %}
          {% if not is_today %}disabled aria-disabled="true"{% endif %}
          hx-post="{{ url_for('entries.request_response', date=day, entry_id=entry_id) }}"
          hx-target="#entry-responses-{{ entry_id }}"
          hx-swap="beforeend"
          hx-include="#user-time"
          hx-on::config-request="const t=document.getElementById('user-time'); if(t){t.value=new Date().toISOString();}"
          {% endif %}>
    {% if response_active %}
    <span class="icon-mask icon-square entry-action__icon" aria-hidden="true"></span>
    {% else %}
    <span class="icon-mask icon-corner-down-left entry-action__icon" aria-hidden="true"></span>
    {% endif %}
  </button>
</entry-actions>
{%- endmacro %}
