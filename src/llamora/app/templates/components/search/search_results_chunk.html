{% set items = results|default([]) %}
{% if session_id is defined %}
<input type="hidden"
       id="search-session-id"
       name="cursor"
       value="{{ session_id|default('') }}"
       hx-swap-oob="true">
{% endif %}
{% for item in items -%}
{% include 'components/search/search_result_item.html' %}
{%- endfor %}
{% if has_more %}
<li class="load-more"
    hx-get="{{ url_for('search.search') }}?cursor={{ session_id|default('') }}"
    hx-trigger="intersect once delay:160ms"
    hx-swap="outerHTML"
    hx-include="#search-form"
    hx-vals='{"search_mode":"chunk"}'
    hx-sync="this:replace"
    aria-hidden="true">
  <span class="load-indicator" aria-hidden="true"></span>
  <span class="visually-hidden">Loading more results...</span>
</li>
{% endif %}
